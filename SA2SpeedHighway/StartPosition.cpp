#include "pch.h"
#include "startpos.h"

StartPositionSADX SADXStartArray[] = {
	{ LevelIDs_EmeraldCoast, 0, { -9, 16, 4 }, 0x6000 },
	{ LevelIDs_EmeraldCoast, 1, { -986.5f, 1145, -2856 }, 0x4000 },
	{ LevelIDs_EmeraldCoast, 2, { 5815, 5, 1136 }, 0 },
	{ LevelIDs_WindyValley, 0, { 1230, -333, -140 }, 0 },
	{ LevelIDs_WindyValley, 1, { 42, 380, -20 }, 0 },
	{ LevelIDs_WindyValley, 2, { 1096, 205, -1251 }, 0 },
	{ LevelIDs_TwinklePark, 0, { -2000, 1770, -985 }, 0x4000 },
	{ LevelIDs_TwinklePark, 1, { 520, 975, 1620 }, 0xC000 },
	{ LevelIDs_SpeedHighway, 0, { -673, -10, 5 }, 0 },
	{ LevelIDs_SpeedHighway, 1, { -50, 42, 0 }, 0 },
	{ LevelIDs_SpeedHighway, 2, { 72, 26, 192 }, 0xC000 },
	{ LevelIDs_RedMountain, 0, { 18, 36, 636 }, 0 },
	{ LevelIDs_RedMountain, 1, { -78, 831, 1919 }, 0 },
	{ LevelIDs_SkyDeck, 0, { 0, -400, 60 }, 0xC000 },
	{ LevelIDs_SkyDeck, 1, { 327, -74, 2535 }, 0 },
	{ LevelIDs_SkyDeck, 2, { -696, -86, 135 }, 0 },
	{ LevelIDs_LostWorld, 0, { -264, 73, -168 }, 0 },
	{ LevelIDs_LostWorld, 1, { 220, 73, -1423 }, 0x4000 },
	{ LevelIDs_LostWorld, 2, { 270, 10, 0 }, 0x8000 },
	{ LevelIDs_IceCap, 0, { 1580, 84, 1074 }, 0x8000 },
	{ LevelIDs_IceCap, 1, { 1060, 336, 280 }, 0 },
	{ LevelIDs_IceCap, 2, { 120, 375, -40 }, 0x8800 },
	{ LevelIDs_Casinopolis, 0, { 0 }, 0 },
	{ LevelIDs_Casinopolis, 1, { 19, -1695, 2850 }, 0 },
	{ LevelIDs_Casinopolis, 2, { 137, 35, 64 }, 0 },
	{ LevelIDs_Casinopolis, 3, { -430, -205, 100 }, 0 },
	{ LevelIDs_FinalEgg, 0, { 170, -165, 490 }, 0 },
	{ LevelIDs_FinalEgg, 1, { 1060, 595, -383 }, 0xC000 },
	{ LevelIDs_FinalEgg, 2, { 1071.7f, 240, -518 }, 0x8000 },
	{ LevelIDs_FinalEgg, 3, { 2811, -405, -1001 }, 0 },
	{ LevelIDs_FinalEgg, 4, { 2383, -3125, -509 }, 0 },
	{ LevelIDs_FinalEgg, 5, { -335, 10, 0 }, 0 },
	{ LevelIDs_Chaos0, 0, { 268, 0, 377 }, 0 },
	{ LevelIDs_Chaos4, 0, { -36, 30, -101 }, 0 },
	{ LevelIDs_Chaos6, 0, { 0, 744, -568 }, 0 },
	{ LevelIDs_PerfectChaos, 0, { -16, 150, -667 }, 0xB92C },
	{ LevelIDs_EggHornet, 0, { 812, 140, 839 }, 0 },
	{ LevelIDs_EggViper, 0, { 260, 50, 0 }, 0 },
	{ LevelIDs_StationSquare, 0, { 280, 0, 840 }, 0 },
	{ LevelIDs_StationSquare, 1, { -500, 0, 1000 }, 0 },
	{ LevelIDs_StationSquare, 2, { 37, -110, 1066 }, 0 },
	{ LevelIDs_StationSquare, 3, { 37, -110, 1066 }, 0 },
	{ LevelIDs_StationSquare, 4, { 37, -110, 1066 }, 0 },
	{ LevelIDs_StationSquare, 5, { 717, 50, 1720 }, 0 },
	{ LevelIDs_EggCarrierOutside, 0, { 0, 700, -1000 }, 0 },
	{ LevelIDs_EggCarrierOutside, 1, { 0, 650, -1000 }, 0 },
	{ LevelIDs_EggCarrierOutside, 2, { 85, 1541, 3392 }, 0 },
	{ LevelIDs_TwinkleCircuit, 0, { 1523, 9, 84 }, 0 },
	{ LevelIDs_TwinkleCircuit, 1, { 1523, 9, 84 }, 0 },
	{ LevelIDs_TwinkleCircuit, 2, { 1523, 9, 84 }, 0 },
	{ LevelIDs_TwinkleCircuit, 3, { 1523, 9, 84 }, 0 },
	{ LevelIDs_TwinkleCircuit, 4, { 1523, 9, 84 }, 0 },
	{ LevelIDs_TwinkleCircuit, 5, { 1523, 9, 84 }, 0 },
	{ LevelIDs_SkyChase1, 0, { 0 }, 0 },
	{ LevelIDs_SkyChase2, 0, { 0 }, 0 },
	{ LevelIDs_SandHill, 0, { 1645, -9, 219 }, 0xC000 },
	{ LevelIDs_SandHill, 1, { 0, -30, 0 }, 0xC000 },
	{ LevelIDs_MysticRuins, 0, { -21, 214, 1221 }, 0 },
	{ LevelIDs_MysticRuins, 1, { 0 }, 0 },
	{ LevelIDs_MysticRuins, 2, { -1134.8f, 354, 406.7f }, 0 },
	{ LevelIDs_MysticRuins, 3, { 2.11f, 108.68f, 172.29f }, 0xC826 },
	{ LevelIDs_ChaoRace, 0, { 2052, 5, 0 }, 0x8000 },
	{ LevelIDs_ChaoRace, 1, { 0, 75, 0 }, 0 },
	{ LevelIDs_Invalid }
};


DataPointer(int, byte_1A558A0, 0x1934B90);

void SetLevelPosAndRot(int playerID) {

	NJS_VECTOR pos = { 0, 0, 0 };
	int rot = 0x0;


	for (int i = 0; i < LengthOfArray(SADXStartArray); ++i)
	{
		if (CurrentSADXLevel == SADXStartArray[i].LevelID && CurrentAct == SADXStartArray[i].ActID)
		{
			pos = SADXStartArray[i].Position;
			rot = SADXStartArray[i].YRot;
			if (playerID > 0)
				pos.x += 10;

			break;
		}
	}

	if (!byte_1A558A0 || isChangingAct) {
		MovePlayersToStartPos(pos, rot);
	}

	return;
}